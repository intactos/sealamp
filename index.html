<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b0f14" />
  <title>Sea Lamp</title>
  <link rel="manifest" href="./manifest.webmanifest" />
  <link rel="icon" href="./icon-192.png" />
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div class="wrap">
    <img src="./icon-192.png" alt="Sea Lamp" class="logo" />
    <h1>Sea Lamp</h1>

    <!-- Setup screen -->
    <div class="card" id="setupCard">
      <h2 id="headline">Loading...</h2>
      <p class="muted" id="subline">Checking lamp availability...</p>

      <div class="row" id="setupButtons">
        <button class="btn primary" id="btnCheck">Check availability</button>
        <a class="btn" id="btnOpenWifi" href="http://4.3.2.1/settings/wifi" target="_blank">Open lamp Wi-Fi settings</a>
        <button class="btn" id="btnFind">Find lamp on Wi-Fi</button>
      </div>

      <div id="ipBlock" style="display:none">
        <div class="sep"></div>
        <p class="muted">If automatic discovery didn't work, enter the lamp's IP address:</p>
        <div class="field">
          <input id="ipInput" inputmode="decimal" placeholder="e.g. 192.168.1.73" />
        </div>
        <div class="row">
          <button class="btn primary" id="btnUseIp">Connect using IP</button>
          <button class="btn" id="btnAutoIp">Get IP from lamp (AP mode)</button>
        </div>
        <p class="small muted" id="ipHint"></p>
      </div>
    </div>

    <!-- Controls screen -->
    <div class="card" id="controlCard" style="display:none">
      <div class="status-bar">
        <span class="status-dot" id="statusDot"></span>
        <span id="statusText">Connected</span>
        <span class="muted small" id="lampAddr"></span>
      </div>

      <div class="control-group">
        <div class="row">
          <button class="btn power-on" id="btnOn">ON</button>
          <button class="btn power-off" id="btnOff">OFF</button>
        </div>
      </div>

      <div class="control-group">
        <label>Brightness</label>
        <input type="range" id="briSlider" min="1" max="255" value="128" />
        <span class="bri-val" id="briVal">128</span>
      </div>

      <div class="sep"></div>
      <a class="btn full-ui" id="btnFullUI" href="http://seazencity.local" target="_blank">Open full lamp controls</a>
      <p class="small muted">Opens the complete interface in your browser</p>
    </div>

    <!-- Diagnostics (collapsible) -->
    <details class="card" style="margin-top:14px">
      <summary>Diagnostics</summary>
      <div class="diag">
        <div class="pre" id="diag">-</div>
      </div>
    </details>
  </div>

  <script src="./app.js"></script>
</body>
</html>
